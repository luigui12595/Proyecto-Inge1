@model ProyectoInge1.Models.ModProyectoInter
@using ProyectoInge1.Helpers
<script>
    function Cancelar(r) {
       // BD_IngeGrupo4Entities1 BD = new BD_IngeGrupo4Entities1();
        var ProyectoB = BD.Proyecto.Find("pp"/*rmodel => model.proyecto.nombre*//*id*/);
        //Condicion de estado
        if (ProyectoB.estado == "Terminado" || ProyectoB.estado == "Cancelado") {
            //solicitar una confirmacion para eliminar proyecto 
            BD.Entry(ProyectoB).State = EntityState.Deleted;
            BD.SaveChanges();
        }
        
    }
    function listbox_moveacross(sourceID, destID) {
        var src = document.getElementById(sourceID);
        var dest = document.getElementById(destID);

        for (var count = 0; count < src.options.length; count++) {

            if (src.options[count].selected == true) {
                var option = src.options[count];

                var newOption = document.createElement("option");
                newOption.value = option.value;
                newOption.text = option.text;
                newOption.selected = true;
                try {
                    dest.add(newOption, null); //Standard
                    src.remove(count, null);
                } catch (error) {
                    dest.add(newOption); // IE only
                    src.remove(count);
                }
                count--;
            }
        }
    }

</script>
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@Styles.Render("~/Content/datepicker")
@Scripts.Render("~/bundles/datePicker")

<h2>Create</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    //var ProyectoB = BD.Proyecto.Find("pp"/*rmodel => model.proyecto.nombre*//*id*/);
    //Condicion de estado
   
    }
    <div class="form-horizontal">
        <h4>Proyecto</h4>
        <hr />

        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.CustomLabelFor(model => model.proyecto.nombre, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.proyecto.nombre, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.proyecto.nombre, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.CustomLabelFor(model => model.proyecto.descripcion, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.proyecto.descripcion, new { htmlAttributes = new { @class = "form-control", placeholder = "50 Carácteres máximo" } })
                @Html.ValidationMessageFor(model => model.proyecto.descripcion, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.CustomLabelFor(model => model.proyecto.fechaInicio, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.proyecto.fechaInicio, new { @class = "form-control datepicker", placeholder = "DATE" })
            </div>
        </div>
        <div class="form-group">
            @Html.CustomLabelFor(model => model.proyecto.fechaFinal, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.proyecto.fechaFinal, new { @class = "form-control datepicker2", placeholder = "DATE" })
            </div>
        </div>
        <br />
        @*cajas de seleccion*@


        <tr valign="top">
            <td>&nbsp;&nbsp;&nbsp;</td>

            <div>
                <td>
                    <div class="control-label col-md-2">
                        Lider
                        
                    </div>
                    <select class="control-label col-md-2" id="a" size="1"></select>
                    <br/>
                </td>
                <div>
                    <td valign="center">
                        <a onclick="listbox_moveacross('a', 'd')" href="#">&gt;&gt;</a>
                        <a onclick="listbox_moveacross('d', 'a')" href="#">&lt;&lt;</a>
                    </td>
                </div>
            </div>
                <div class = "control-label col-md-2">
                    Desarrolladores
                    <br />
                </div>
            <div>
                <td>
                    <select class="control-label col-md-2" id="s" size="10" multiple=""></select>
                </td>
            </div>
            <div>
                <td valign="center">
                    <a onclick="listbox_moveacross('s', 'd')" href="#">&gt;&gt;</a>
                    <a onclick="listbox_moveacross('d', 's')" href="#">&lt;&lt;</a>
                </td>
            </div>
            <div>
                <td>
                    <select class="control-label col-md-2" id="d" size="10" multiple="">
                        <option value="a">Afghanistan</option>
                        <option value="b">Bahamas</option>

                        @*Aqui se insertan los usuarios*@

                    </select>
                    <br/>
                </td>
            </div>
        </tr>

        @*Fin cajas de seleccion*@
        <div class="form-group">
            <div class="col-md-offset-2 col-md-5">
                <input type="submit" value="Aceptar" class="btn btn-primary" />
                <div class="form-actions no-color">
                    <input type="submit" value="Eliminar" class="btn btn-default" />
                    |
                    @Html.ActionLink("Back to List", "Index")
                </div>
                <div class="btn btn-danger" style="color:white;" />
                @Html.ActionLink("Cancelar", "Index", null, new { @style = "color:#FFFFFF;" })
                 
            </div>
        </div>

        <br/>  
        

</div>
}
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script type="text/javascript">
    $(function () {
        $('.datepicker, .datepicker2').datepicker("setDate", new Date()); //Initialise any date pickers
    });
    $(".datepicker").on("dp.change", function (e) {
        $('.datepicker2').data("DatePicker").setMinDate(e.date);
    });
    $(".datepicker2").on("dp.change", function (e) {
        $('.datepicker').data("DatePicker").setMaxDate(e.date);
    });
    </script>
}