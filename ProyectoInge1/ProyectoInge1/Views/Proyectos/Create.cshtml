@model ProyectoInge1.Models.ModProyectoInter
@using ProyectoInge1.Helpers
@*{ Array userList; }*@

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@Styles.Render("~/Content/datepicker")
@Scripts.Render("~/bundles/datePicker")

<h2>Proyecto</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <div class="form-horizontal">
        <h4>Crear Proyecto</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            <label class="control-label col-md-2">* Nombre:</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.proyecto.nombre, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.proyecto.nombre, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.CustomLabelFor(model => model.proyecto.descripcion, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.proyecto.descripcion, new { htmlAttributes = new { @class = "form-control", placeholder = "50 Carácteres máximo" } })
                @Html.ValidationMessageFor(model => model.proyecto.descripcion, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">Fecha de Inicio:</label>
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.proyecto.fechaInicio, new { @class = "form-control datepicker" })
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Fecha Final:</label>
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.proyecto.fechaFinal, new { @class = "form-control datepicker2" })
            </div>
        </div>
        
        <div class="form-group">
            <label class="control-label col-md-2">* Estado:</label>
            <div class="col-md-10" style="padding-top:0.5em;">
                @Html.DropDownListFor(model => model.proyecto.estado, new[] { new SelectListItem() { Text = "Iniciado" }, new SelectListItem() { Text = "En Proceso" },
                                                                      new SelectListItem() { Text = "Cancelado" }, new SelectListItem() { Text = "Suspendido" } },
                                                                       "-- No asignado--", new { @class = "form-control" })
            </div>
        </div>
        <br />
        @**@<div class="form-group">
            <label class="control-label col-md-2">* Cliente:</label>
            <div class="col-md-10" style="padding-top:0.5em;">
                @Html.DropDownListFor(model => model.proyecto.Cliente, new SelectList(ViewBag.Usuarios, "cedula", "names"), "Seleccionar Cliente", new { @class = "control-label col-md-2" })
            </div>
        </div>
        @*<div class="form-group">
            <label class="control-label col-md-2">* Lider:</label>
            <div class="col-md-10" style="padding-top:0.5em;">
                @* @Html.DropDownListFor(model => model.proyecto.lider, new SelectList(ViewBag.Desarrolladores, "cedula", "names" ), "Seleccionar Lider", new { @id = "liderDD", @class = "control-label col-md-2"} );
                @Html.ListBox("liderValue", (SelectList)ViewBag.Leader, new { @class = "form-control", @style = "height: 33px;", @readonly = true })
            </div>
        </div>*@
        <div class="form-group">
            <label class="control-label col-md-2">* Lider:</label>
            <div class="col-md-10" style="padding-top:0.5em;">
                @Html.DropDownListFor(model => model.proyecto.lider, new SelectList(ViewBag.DesarrolladoresNL, "cedula", "names"), "Seleccionar Lider", new { @id = "leaderSel", @class = "control-label col-md-2" })
            </div>
        </div>
        <br /><br />
        <div class="row">
            <div class="col-md-2">&nbsp;</div>
            <div class="form-group col-md-4">
                <label class="control-label">Desarrolladores Asignados</label>
                @Html.ListBox("selectedOpts", (MultiSelectList)ViewBag.SelectOpts, new { @class = "form-control" })
                @*<br/><input type="button" id="leaderButton" class="btn btn-success" value="Asignar Lider" title="Seleccione una opcion de la lista de desarrolladores y presione este boton para asignar lider" onclick="asignLeader()" disabled>*@
            </div>
            <div class="form-group col-md-1">
                <div class="form-group">
                    <button type="button" id="Right" class="btn btn-warning btn-lg">
                        <span class="glyphicon-arrow-right" aria-hidden="true"></span>    
                    </button>
                </div>
                <div class="form-group">
                    <button type="button" id="Left" class="btn btn-success btn-lg">
                        <span class="glyphicon-arrow-left" aria-hidden="true"></span>
                    </button>
                </div>
            </div>
            <div class="form-group col-md-4">
                <label class="control-label">Desarrolladores Disponibles</label>
                @Html.ListBox("AvailableOpts", (MultiSelectList)ViewBag.AvailableOpts, new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <div class=" col-md-8">
                <input type="submit" id="btnSubmit" value="Aceptar" class="btn btn-primary" />
                <div class="btn btn-danger" style="color:white;" />
                @Html.ActionLink("Cancelar", "Index", null, new { @style = "color:#FFFFFF;" })
            </div>
        </div>
    </div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/multisel")

<script type="text/javascript">
    $(function () {
        $('.datepicker, .datepicker2').datepicker({
            autoclose: true,
            todayHighlight: true
        }); //Initialise any date pickers
    });

    $(".datepicker").on("dp.change", function (e) {
        $('.datepicker2').data("DatePicker").setMinDate(e.date);
    });
    $(".datepicker2").on("dp.change", function (e) {
        $('.datepicker').data("DatePicker").setMaxDate(e.date);
    });
</script>
}